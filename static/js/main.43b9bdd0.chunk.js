(this["webpackJsonplogcompare-react"]=this["webpackJsonplogcompare-react"]||[]).push([[0],{106:function(e,t,n){},123:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),i=n.n(c),s=(n(106),n(26)),o=n(13),u=n.n(o),l=n(70),p=n(19),d=n(91),j=n(170),m=n(173),b=n(36),h=n(161),f=n(171),x=n(172),O=n(162),g=n(164),v=n(163),w=n(165),k=n(166),y=n(167),C=n(175),P=n(168),F=n(169),S=n(21),T=n(11),A=n(2),M=n(8);function D(e){return Object(M.jsxs)(S.c,{rotated:!0,data:e.data,children:[Object(M.jsx)(T.b,{factory:A.zb}),Object(M.jsx)(S.a,{}),Object(M.jsx)(S.g,{}),Object(M.jsx)(S.b,{valueField:"percentrankdps",argumentField:"account",name:"Percentile DPS"}),Object(M.jsx)(S.b,{valueField:"percentrankmight",argumentField:"account",name:"Percentile Might"}),Object(M.jsx)(S.b,{valueField:"percentrankquickness",argumentField:"account",name:"Percentile Quickness"}),Object(M.jsx)(S.b,{valueField:"percentrankalacrity",argumentField:"account",name:"Percentile Alacrity"}),Object(M.jsx)(S.b,{valueField:"percentrankfury",argumentField:"account",name:"Percentile Fury"}),Object(M.jsx)(T.j,{}),Object(M.jsx)(S.d,{}),Object(M.jsx)(T.f,{}),Object(M.jsx)(S.f,{}),Object(M.jsx)(S.e,{text:e.title})]})}var E=Object(w.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}},small:{width:e.spacing(3),height:e.spacing(3)},large:{width:e.spacing(7),height:e.spacing(7)}}}));function I(e){var t=E();return e.data?Object(M.jsxs)(k.a,{variant:"outlined",children:[Object(M.jsx)(y.a,{avatar:Object(M.jsx)(C.a,{variant:"square",className:t.large,alt:e.data.metadata.fightName,src:e.data.metadata.fightIcon}),title:e.data.metadata.fightName,subheader:"".concat(e.data.metadata.permaLink," \n LogCompare ID: ").concat(e.data.metadata.tryID)}),Object(M.jsxs)(P.a,{children:[Object(M.jsx)(D,{data:e.data.data.filter((function(e){return"DPS"===e.archetype})).sort((function(e,t){return e.percentrankdps-t.percentrankdps})),title:"DPS: Compare Percentiles"}),Object(M.jsx)(D,{data:e.data.data.filter((function(e){return"SUPPORT"===e.archetype})).sort((function(e,t){return e.percentrankdps-t.percentrankdps})),title:"SUPPORT: Compare Percentiles"}),Object(M.jsx)(D,{data:e.data.data.filter((function(e){return"HEALER"===e.archetype})),title:"HEALER: Compare Percentiles"})]})]}):Object(M.jsxs)(k.a,{variant:"outlined",children:[Object(M.jsx)(y.a,{avatar:Object(M.jsx)(C.a,{variant:"square",className:t.large,alt:void 0,src:void 0}),title:void 0,subheader:void 0}),Object(M.jsx)(P.a,{children:!e.isEmpty&&Object(M.jsx)(F.a,{})})]})}var L=n(174),z=Object(w.a)((function(e){return Object(L.a)({previewChip:{minWidth:160,maxWidth:210},root:{width:"100%",backgroundColor:e.palette.grey[300],display:"flex",flexDirection:"row",padding:0}})}));function N(){var e=Object(a.useState)([]),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(new Map),i=Object(p.a)(c,2),o=i[0],w=i[1],k=Object(a.useState)(new Map),y=Object(p.a)(k,2),C=y[0],P=y[1],F=Object(a.useState)(""),S=Object(p.a)(F,2),T=S[0],A=S[1],D="https://mapleia.pythonanywhere.com",E="http://mapleia.github.io",L=z();function N(e){return R.apply(this,arguments)}function R(){return(R=Object(l.a)(u.a.mark((function e(t){var n,a,r,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=27;break}return e.prev=1,e.next=4,fetch("".concat(D,"/api/encounters/upload_report/?id=").concat(t),{method:"POST",headers:{mode:"cors","Access-Control-Allow-Origin":E,"Content-Type":"application/json","Access-Control-Allow-Methods":"POST, GET, OPTIONS"}});case 4:if(!(n=e.sent).ok){e.next=22;break}return e.next=8,n.json();case 8:return a=e.sent,e.next=11,fetch("".concat(D,"/api/percentiles/?name=").concat(a.fightName));case 11:if(!(r=e.sent).ok){e.next=21;break}return e.next=15,r.json();case 15:return c=e.sent,void 0,i=c.filter((function(e){return e.tryID===t})),e.abrupt("return",{metadata:a,data:i});case 21:return e.abrupt("return",null);case 22:e.next=27;break;case 24:return e.prev=24,e.t0=e.catch(1),e.abrupt("return",Promise.reject(e.t0));case 27:return e.abrupt("return",null);case 28:case"end":return e.stop()}}),e,null,[[1,24]])})))).apply(this,arguments)}function B(){return(B=Object(l.a)(u.a.mark((function e(){var t,a,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(e){var t=new FormData;return t.append("file",e),t.append("generator","ei"),t.append("json","1"),t},a=Object(s.a)(n),e.prev=2,c=u.a.mark((function e(){var n,a,c,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.value,0===C.get(n.name)){e.next=3;break}return e.abrupt("return","continue");case 3:return e.prev=3,P((function(e){return new Map(e).set(n.name,10)})),(a=new Headers).append("Content-Type","multipart/form-data"),a.append("Access-Control-Allow-Headers","Origin, Content-Type"),a.append("Access-Control-Allow-Methods","GET, POST, OPTIONS"),a.append("Access-Control-Max-Age","86400"),a.append("Access-Control-Origin",E),e.next=13,fetch("https://dps.report/uploadContent",{method:"POST",body:t(n),mode:"cors",headers:a});case 13:return c=e.sent,e.next=16,c.json();case 16:return i=e.sent,console.log(i),P((function(e){return new Map(e).set(n.name,30)})),e.next=21,N(i.id);case 21:(s=e.sent)&&(P((function(e){return new Map(e).set(n.name,70)})),s.metadata.permaLink=i.permalink,P((function(e){return new Map(e).set(n.name,100)})),w((function(e){return new Map(e).set(n.name,s)}))),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(3),console.error(e.t0);case 28:case"end":return e.stop()}}),e,null,[[3,25]])})),a.s();case 5:if((r=a.n()).done){e.next=12;break}return e.delegateYield(c(),"t0",7);case 7:if("continue"!==e.t0){e.next=10;break}return e.abrupt("continue",10);case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(2),a.e(e.t1);case 17:return e.prev=17,a.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})))).apply(this,arguments)}return Object(M.jsxs)(j.a,{maxWidth:"lg",children:[Object(M.jsx)(m.a,{paddingTop:2,paddingBottom:2,marginBottom:1,color:"primary.main",children:Object(M.jsx)(b.a,{variant:"h2",align:"center",children:"Log Compare"})}),Object(M.jsx)(d.a,{maxFileSize:2e7,acceptedFiles:[".evtc",".zevtc"],onChange:function(e){var t=new Map(C);e.forEach((function(e){t.has(e.name)||t.set(e.name,0)})),r(e),P(t)},filesLimit:10,onDelete:function(e){r(n.splice(n.findIndex((function(t){return t.name===e.name})),0)),P((function(){var t=C;return t.delete(e.name),t}))},showPreviews:!0,showPreviewsInDropzone:!1,useChipsForPreview:!0,previewGridProps:{container:{spacing:1,direction:"row"}},previewChipProps:{classes:{root:L.previewChip}},previewText:"Selected files"}),Object(M.jsxs)(m.a,{marginTop:2,marginBottom:2,children:[Object(M.jsx)(h.a,{variant:"outlined",size:"large",color:"primary",onClick:function(){return B.apply(this,arguments)},children:"Compare"}),Object(M.jsx)(h.a,{variant:"outlined",size:"large",color:"primary",onClick:function(){return window.location.reload()},children:"Refresh Page"}),Object(M.jsx)(h.a,{variant:"outlined",size:"large",color:"primary",onClick:function(){r([]),w(new Map),P(new Map),A("")},children:"Clear All"}),Object(M.jsx)(O.a,{dense:!0,className:L.root,children:n.map((function(e){return Object(M.jsxs)(g.a,{button:!0,divider:!0,onClick:function(){A(e.name)},children:[Object(M.jsx)(f.a,{children:Object(M.jsx)(x.a,{variant:"determinate",value:C.get(e.name),style:{marginRight:10}})}),Object(M.jsx)(v.a,{primary:"File: ".concat(e.name)})]},e.name)}))})]}),Object(M.jsx)(I,{isEmpty:0===o.size,data:o.get(T)})]})}var R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,177)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(M.jsx)(r.a.StrictMode,{children:Object(M.jsx)(N,{})}),document.getElementById("root")),R()}},[[123,1,2]]]);
//# sourceMappingURL=main.43b9bdd0.chunk.js.map